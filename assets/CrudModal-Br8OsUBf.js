import{ac as h,$ as i,ad as v,ae as f,ag as w,ah as T,af as n,ai as y,aj as b,ak as _,al as g,am as D,an as P,ao as $,_ as R,aA as S,o as k,c as B,a as r,g as p,a5 as C,b as M}from"./index-DpLj8-BT.js";const j=h("productType",()=>{const l=i([]),a=i(!0);return{productTypes:l,isLoading:a,fetchProductTypes:()=>{const o=v(f(n,"productTypes"));return w(o,t=>{const d=[];t.forEach(u=>{d.push({id:u.id,...u.data()})}),l.value=d,a.value=!1},t=>{console.error("Firebase 讀取失敗:",t),a.value=!1})},addProductType:async o=>{a.value=!0;try{await T(f(n,"productTypes"),{...o,createdAt:new Date,updatedAt:new Date})}catch(e){throw console.error("新增失敗:",e),e}finally{a.value=!1}},updateProductType:async(o,e)=>{a.value=!0;try{const t=y(n,"productTypes",o),d={...e};delete d.id,await b(t,{...d,updatedAt:new Date}),console.log("更新成功")}catch(t){throw console.error("更新失敗：",t),t}finally{a.value=!1}},deleteProductType:async o=>{a.value=!0;try{const e=y(n,"productTypes",o);await _(e),console.log("刪除成功")}catch(e){throw console.error("刪除失敗：",e),e}finally{a.value=!1}},uploadImage:async o=>{if(!o)return null;try{const e=`${Date.now()}_${o.name}`,t=g(D,`product_types/${e}`),d=await P(t,o);return await $(d.ref)}catch(e){throw console.error("圖片上傳失敗：",e),e}}}}),V={class:"modal-card"},A={class:"modal-card-head"},L={class:"modal-card-body"},I={class:"modal-card-foot"},N={class:"buttons"},U={__name:"CrudModal",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(l){const a=S(l,"modelValue");return(c,s)=>(k(),B("div",{class:C(["modal",{"is-active":a.value}])},[s[3]||(s[3]=r("div",{class:"modal-background"},null,-1)),r("div",V,[r("header",A,[p(c.$slots,"header",{},()=>[s[1]||(s[1]=r("p",{class:"modal-card-title has-text-warning"},"請父元件提供Slot",-1))],!0)]),r("section",L,[p(c.$slots,"default",{},()=>[s[2]||(s[2]=M("請父元件提供Slot",-1))],!0)]),r("footer",I,[p(c.$slots,"footer",{},()=>[r("div",N,[r("button",{class:"button",onClick:s[0]||(s[0]=m=>a.value=!1)},"OK")])],!0)])])],2))}},z=R(U,[["__scopeId","data-v-9de45a3e"]]);export{z as C,j as u};
